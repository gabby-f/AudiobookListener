{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SpeexParser = void 0;\nconst debug_1 = require(\"debug\");\nconst VorbisParser_1 = require(\"../vorbis/VorbisParser\");\nconst Speex = require(\"./Speex\");\nconst debug = (0, debug_1.default)('music-metadata:parser:ogg:speex');\n/**\n * Speex, RFC 5574\n * Ref:\n * - https://www.speex.org/docs/manual/speex-manual/\n * - https://tools.ietf.org/html/rfc5574\n */\nclass SpeexParser extends VorbisParser_1.VorbisParser {\n  constructor(metadata, options, tokenizer) {\n    super(metadata, options);\n    this.tokenizer = tokenizer;\n  }\n  /**\n   * Parse first Speex Ogg page\n   * @param {IPageHeader} header\n   * @param {Buffer} pageData\n   */\n  parseFirstPage(header, pageData) {\n    debug('First Ogg/Speex page');\n    const speexHeader = Speex.Header.get(pageData, 0);\n    this.metadata.setFormat('codec', `Speex ${speexHeader.version}`);\n    this.metadata.setFormat('numberOfChannels', speexHeader.nb_channels);\n    this.metadata.setFormat('sampleRate', speexHeader.rate);\n    if (speexHeader.bitrate !== -1) {\n      this.metadata.setFormat('bitrate', speexHeader.bitrate);\n    }\n  }\n}\nexports.SpeexParser = SpeexParser;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}