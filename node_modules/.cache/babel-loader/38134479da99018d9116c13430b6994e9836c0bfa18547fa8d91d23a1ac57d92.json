{"ast":null,"code":"// Small IndexedDB file store utility\nexport function openDB(){let dbName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'audiobook-store';return new Promise((resolve,reject)=>{const req=indexedDB.open(dbName,1);req.onupgradeneeded=()=>{const db=req.result;if(!db.objectStoreNames.contains('files'))db.createObjectStore('files');};req.onsuccess=()=>resolve(req.result);req.onerror=()=>reject(req.error);});}export async function saveFile(key,file){const db=await openDB();return new Promise((resolve,reject)=>{const tx=db.transaction('files','readwrite');const store=tx.objectStore('files');const req=store.put(file,key);req.onsuccess=()=>resolve(true);req.onerror=()=>reject(req.error);});}export async function getFile(key){const db=await openDB();return new Promise((resolve,reject)=>{const tx=db.transaction('files','readonly');const store=tx.objectStore('files');const req=store.get(key);req.onsuccess=()=>resolve(req.result||null);req.onerror=()=>reject(req.error);});}export async function deleteFile(key){const db=await openDB();return new Promise((resolve,reject)=>{const tx=db.transaction('files','readwrite');const store=tx.objectStore('files');const req=store.delete(key);req.onsuccess=()=>resolve(true);req.onerror=()=>reject(req.error);});}","map":{"version":3,"names":["openDB","dbName","arguments","length","undefined","Promise","resolve","reject","req","indexedDB","open","onupgradeneeded","db","result","objectStoreNames","contains","createObjectStore","onsuccess","onerror","error","saveFile","key","file","tx","transaction","store","objectStore","put","getFile","get","deleteFile","delete"],"sources":["C:/Users/gabby/Documents/Audiobook Listener/src/utils/idbFileStore.js"],"sourcesContent":["// Small IndexedDB file store utility\r\nexport function openDB(dbName = 'audiobook-store') {\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.open(dbName, 1);\r\n    req.onupgradeneeded = () => {\r\n      const db = req.result;\r\n      if (!db.objectStoreNames.contains('files')) db.createObjectStore('files');\r\n    };\r\n    req.onsuccess = () => resolve(req.result);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function saveFile(key, file) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readwrite');\r\n    const store = tx.objectStore('files');\r\n    const req = store.put(file, key);\r\n    req.onsuccess = () => resolve(true);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function getFile(key) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readonly');\r\n    const store = tx.objectStore('files');\r\n    const req = store.get(key);\r\n    req.onsuccess = () => resolve(req.result || null);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function deleteFile(key) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readwrite');\r\n    const store = tx.objectStore('files');\r\n    const req = store.delete(key);\r\n    req.onsuccess = () => resolve(true);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}