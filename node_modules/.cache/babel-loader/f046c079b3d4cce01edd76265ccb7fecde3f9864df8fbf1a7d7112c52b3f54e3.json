{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchWithAuth = exports.resolveHeadersConstructor = exports.resolveFetch = void 0;\nconst resolveFetch = customFetch => {\n  if (customFetch) {\n    return (...args) => customFetch(...args);\n  }\n  return (...args) => fetch(...args);\n};\nexports.resolveFetch = resolveFetch;\nconst resolveHeadersConstructor = () => {\n  return Headers;\n};\nexports.resolveHeadersConstructor = resolveHeadersConstructor;\nconst fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n  const fetch = (0, exports.resolveFetch)(customFetch);\n  const HeadersConstructor = (0, exports.resolveHeadersConstructor)();\n  return async (input, init) => {\n    var _a;\n    const accessToken = (_a = await getAccessToken()) !== null && _a !== void 0 ? _a : supabaseKey;\n    let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey);\n    }\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`);\n    }\n    return fetch(input, Object.assign(Object.assign({}, init), {\n      headers\n    }));\n  };\n};\nexports.fetchWithAuth = fetchWithAuth;\n//# sourceMappingURL=fetch.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}