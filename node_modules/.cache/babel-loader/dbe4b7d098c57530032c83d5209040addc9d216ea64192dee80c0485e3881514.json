{"ast":null,"code":"// Small IndexedDB file store utility\nexport function openDB(dbName = 'audiobook-store') {\n  return new Promise((resolve, reject) => {\n    const req = indexedDB.open(dbName, 1);\n    req.onupgradeneeded = () => {\n      const db = req.result;\n      if (!db.objectStoreNames.contains('files')) db.createObjectStore('files');\n    };\n    req.onsuccess = () => resolve(req.result);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function saveFile(key, file) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('files', 'readwrite');\n    const store = tx.objectStore('files');\n    const req = store.put(file, key);\n    req.onsuccess = () => resolve(true);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function getFile(key) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('files', 'readonly');\n    const store = tx.objectStore('files');\n    const req = store.get(key);\n    req.onsuccess = () => resolve(req.result || null);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function deleteFile(key) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('files', 'readwrite');\n    const store = tx.objectStore('files');\n    const req = store.delete(key);\n    req.onsuccess = () => resolve(true);\n    req.onerror = () => reject(req.error);\n  });\n}","map":{"version":3,"names":["openDB","dbName","Promise","resolve","reject","req","indexedDB","open","onupgradeneeded","db","result","objectStoreNames","contains","createObjectStore","onsuccess","onerror","error","saveFile","key","file","tx","transaction","store","objectStore","put","getFile","get","deleteFile","delete"],"sources":["C:/Users/gabby/Documents/Audiobook Listener/src/utils/idbFileStore.js"],"sourcesContent":["// Small IndexedDB file store utility\r\nexport function openDB(dbName = 'audiobook-store') {\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.open(dbName, 1);\r\n    req.onupgradeneeded = () => {\r\n      const db = req.result;\r\n      if (!db.objectStoreNames.contains('files')) db.createObjectStore('files');\r\n    };\r\n    req.onsuccess = () => resolve(req.result);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function saveFile(key, file) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readwrite');\r\n    const store = tx.objectStore('files');\r\n    const req = store.put(file, key);\r\n    req.onsuccess = () => resolve(true);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function getFile(key) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readonly');\r\n    const store = tx.objectStore('files');\r\n    const req = store.get(key);\r\n    req.onsuccess = () => resolve(req.result || null);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n\r\nexport async function deleteFile(key) {\r\n  const db = await openDB();\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('files', 'readwrite');\r\n    const store = tx.objectStore('files');\r\n    const req = store.delete(key);\r\n    req.onsuccess = () => resolve(true);\r\n    req.onerror = () => reject(req.error);\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA,OAAO,SAASA,MAAMA,CAACC,MAAM,GAAG,iBAAiB,EAAE;EACjD,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,GAAG,GAAGC,SAAS,CAACC,IAAI,CAACN,MAAM,EAAE,CAAC,CAAC;IACrCI,GAAG,CAACG,eAAe,GAAG,MAAM;MAC1B,MAAMC,EAAE,GAAGJ,GAAG,CAACK,MAAM;MACrB,IAAI,CAACD,EAAE,CAACE,gBAAgB,CAACC,QAAQ,CAAC,OAAO,CAAC,EAAEH,EAAE,CAACI,iBAAiB,CAAC,OAAO,CAAC;IAC3E,CAAC;IACDR,GAAG,CAACS,SAAS,GAAG,MAAMX,OAAO,CAACE,GAAG,CAACK,MAAM,CAAC;IACzCL,GAAG,CAACU,OAAO,GAAG,MAAMX,MAAM,CAACC,GAAG,CAACW,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeC,QAAQA,CAACC,GAAG,EAAEC,IAAI,EAAE;EACxC,MAAMV,EAAE,GAAG,MAAMT,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMgB,EAAE,GAAGX,EAAE,CAACY,WAAW,CAAC,OAAO,EAAE,WAAW,CAAC;IAC/C,MAAMC,KAAK,GAAGF,EAAE,CAACG,WAAW,CAAC,OAAO,CAAC;IACrC,MAAMlB,GAAG,GAAGiB,KAAK,CAACE,GAAG,CAACL,IAAI,EAAED,GAAG,CAAC;IAChCb,GAAG,CAACS,SAAS,GAAG,MAAMX,OAAO,CAAC,IAAI,CAAC;IACnCE,GAAG,CAACU,OAAO,GAAG,MAAMX,MAAM,CAACC,GAAG,CAACW,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeS,OAAOA,CAACP,GAAG,EAAE;EACjC,MAAMT,EAAE,GAAG,MAAMT,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMgB,EAAE,GAAGX,EAAE,CAACY,WAAW,CAAC,OAAO,EAAE,UAAU,CAAC;IAC9C,MAAMC,KAAK,GAAGF,EAAE,CAACG,WAAW,CAAC,OAAO,CAAC;IACrC,MAAMlB,GAAG,GAAGiB,KAAK,CAACI,GAAG,CAACR,GAAG,CAAC;IAC1Bb,GAAG,CAACS,SAAS,GAAG,MAAMX,OAAO,CAACE,GAAG,CAACK,MAAM,IAAI,IAAI,CAAC;IACjDL,GAAG,CAACU,OAAO,GAAG,MAAMX,MAAM,CAACC,GAAG,CAACW,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeW,UAAUA,CAACT,GAAG,EAAE;EACpC,MAAMT,EAAE,GAAG,MAAMT,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMgB,EAAE,GAAGX,EAAE,CAACY,WAAW,CAAC,OAAO,EAAE,WAAW,CAAC;IAC/C,MAAMC,KAAK,GAAGF,EAAE,CAACG,WAAW,CAAC,OAAO,CAAC;IACrC,MAAMlB,GAAG,GAAGiB,KAAK,CAACM,MAAM,CAACV,GAAG,CAAC;IAC7Bb,GAAG,CAACS,SAAS,GAAG,MAAMX,OAAO,CAAC,IAAI,CAAC;IACnCE,GAAG,CAACU,OAAO,GAAG,MAAMX,MAAM,CAACC,GAAG,CAACW,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}