{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import{motion}from'framer-motion';import{List,X,Disc3}from'lucide-react';import{Button}from'../ui/button';import PlaybackControls from'./PlaybackControls';import ProgressBar from'./ProgressBar';import ChapterList from'./ChapterList';import SpeedControl from'./SpeedControl';import VolumeControl from'./VolumeControl';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AudiobookPlayer(_ref){var _file$name;let{file,chapters,bookInfo,onClose,savedState,onSaveState,autoPlayRestore=false,onAutoPlayHandled,restoreTitle=null}=_ref;const audioRef=useRef(null);const[isPlaying,setIsPlaying]=useState(false);const[currentTime,setCurrentTime]=useState(0);const[duration,setDuration]=useState(0);const[buffered,setBuffered]=useState(0);const[volume,setVolume]=useState(1);const[isMuted,setIsMuted]=useState(false);const[speed,setSpeed]=useState(1);const[showChapters,setShowChapters]=useState(false);const[currentChapterIndex,setCurrentChapterIndex]=useState(0);const[audioUrl,setAudioUrl]=useState(null);// Create object URL for the file\nuseEffect(()=>{if(file){const url=URL.createObjectURL(file);setAudioUrl(url);return()=>URL.revokeObjectURL(url);}},[file]);// Restore saved playback position\nuseEffect(()=>{if(audioRef.current&&savedState&&savedState.currentTime){audioRef.current.currentTime=savedState.currentTime;setCurrentTime(savedState.currentTime);if(savedState.volume!==undefined)setVolume(savedState.volume);if(savedState.speed!==undefined){setSpeed(savedState.speed);audioRef.current.playbackRate=savedState.speed;}}},[savedState,audioUrl]);// Try to autoplay when a new audio URL is available (user gesture from file select usually allows this)\nuseEffect(()=>{if(!audioUrl||!audioRef.current)return;const tryPlay=async()=>{try{await audioRef.current.play();setIsPlaying(true);// If this was a restore attempt, mark it handled\nif(onAutoPlayHandled)onAutoPlayHandled();}catch(err){// Autoplay may be blocked by the browser; keep UI ready for manual play\n// eslint-disable-next-line no-console\nconsole.warn('Autoplay attempt was blocked or failed:',err);if(autoPlayRestore){setShowResumePrompt(true);}}};tryPlay();},[audioUrl,autoPlayRestore,onAutoPlayHandled]);// Show a resume prompt when autoplay was blocked for restored files\nconst[showResumePrompt,setShowResumePrompt]=useState(false);// Brief unobtrusive toast to confirm a restored book\nconst[showRestoreToast,setShowRestoreToast]=useState(false);useEffect(()=>{if(restoreTitle){setShowRestoreToast(true);const t=setTimeout(()=>setShowRestoreToast(false),3500);return()=>clearTimeout(t);}},[restoreTitle]);const handleResumeClick=async()=>{if(!audioRef.current)return;try{await audioRef.current.play();setIsPlaying(true);setShowResumePrompt(false);if(onAutoPlayHandled)onAutoPlayHandled();}catch(err){// If still blocked, keep the prompt visible\n// eslint-disable-next-line no-console\nconsole.warn('User-initiated resume failed:',err);}};// Save state periodically during playback\nuseEffect(()=>{if(!isPlaying||!onSaveState)return;const interval=setInterval(()=>{onSaveState({currentTime,volume,speed,timestamp:Date.now()});},5000);// Save every 5 seconds\nreturn()=>clearInterval(interval);},[isPlaying,currentTime,volume,speed,onSaveState]);// Update current chapter based on playback time\nuseEffect(()=>{if(chapters.length===0)return;const chapterIndex=chapters.findIndex((chapter,index)=>{const nextChapter=chapters[index+1];if(nextChapter){return currentTime>=chapter.startTime&&currentTime<nextChapter.startTime;}return currentTime>=chapter.startTime;});if(chapterIndex!==-1&&chapterIndex!==currentChapterIndex){setCurrentChapterIndex(chapterIndex);}},[currentTime,chapters,currentChapterIndex]);const handlePlayPause=useCallback(()=>{if(!audioRef.current)return;if(isPlaying){audioRef.current.pause();}else{audioRef.current.play();}setIsPlaying(!isPlaying);},[isPlaying]);const handleSeek=useCallback(time=>{if(!audioRef.current)return;audioRef.current.currentTime=time;setCurrentTime(time);},[]);const handleSkipBack=useCallback(()=>{if(!audioRef.current)return;audioRef.current.currentTime=Math.max(0,audioRef.current.currentTime-15);},[]);const handleSkipForward=useCallback(()=>{if(!audioRef.current)return;audioRef.current.currentTime=Math.min(duration,audioRef.current.currentTime+15);},[duration]);const handlePrevChapter=useCallback(()=>{if(chapters.length<=1||currentChapterIndex===0)return;const prevChapter=chapters[currentChapterIndex-1];if(prevChapter&&audioRef.current){audioRef.current.currentTime=prevChapter.startTime;}},[chapters,currentChapterIndex]);const handleNextChapter=useCallback(()=>{if(chapters.length<=1||currentChapterIndex>=chapters.length-1)return;const nextChapter=chapters[currentChapterIndex+1];if(nextChapter&&audioRef.current){audioRef.current.currentTime=nextChapter.startTime;}},[chapters,currentChapterIndex]);const handleChapterSelect=useCallback(index=>{if(chapters[index]&&audioRef.current){audioRef.current.currentTime=chapters[index].startTime;setShowChapters(false);}},[chapters]);const handleVolumeChange=useCallback(newVolume=>{if(!audioRef.current)return;audioRef.current.volume=newVolume;setVolume(newVolume);setIsMuted(newVolume===0);},[]);const handleToggleMute=useCallback(()=>{if(!audioRef.current)return;const newMuted=!isMuted;audioRef.current.muted=newMuted;setIsMuted(newMuted);},[isMuted]);const handleSpeedChange=useCallback(newSpeed=>{if(!audioRef.current)return;audioRef.current.playbackRate=newSpeed;setSpeed(newSpeed);},[]);const handleTimeUpdate=useCallback(()=>{if(!audioRef.current)return;setCurrentTime(audioRef.current.currentTime);},[]);const handleLoadedMetadata=useCallback(()=>{if(!audioRef.current)return;setDuration(audioRef.current.duration);},[]);const handleProgress=useCallback(()=>{if(!audioRef.current||!audioRef.current.buffered.length)return;const bufferedEnd=audioRef.current.buffered.end(audioRef.current.buffered.length-1);setBuffered(bufferedEnd);},[]);const currentChapter=chapters[currentChapterIndex];return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"flex flex-col h-full bg-gradient-to-b from-slate-900 via-slate-950 to-black\",children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:audioUrl,onTimeUpdate:handleTimeUpdate,onLoadedMetadata:handleLoadedMetadata,onProgress:handleProgress,onPlay:()=>setIsPlaying(true),onPause:()=>setIsPlaying(false),onEnded:()=>setIsPlaying(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"sticky top-0 z-30 backdrop-blur-md bg-slate-950/50 border-b border-slate-800/50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 md:px-6 py-3 md:py-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",onClick:onClose,className:\"text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-full transition-all duration-200\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-widest text-slate-500 font-semibold\",children:\"Now Playing\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 md:gap-2\",children:[/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",onClick:()=>setShowChapters(true),className:\"text-slate-400 hover:text-emerald-400 hover:bg-slate-800/50 rounded-full transition-all duration-200\",children:/*#__PURE__*/_jsx(List,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(SpeedControl,{speed:speed,onSpeedChange:handleSpeedChange}),/*#__PURE__*/_jsx(VolumeControl,{volume:volume,onVolumeChange:handleVolumeChange,isMuted:isMuted,onToggleMute:handleToggleMute})]})]})}),showResumePrompt&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-emerald-600/95 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Resume playback to continue\"}),/*#__PURE__*/_jsx(Button,{onClick:handleResumeClick,variant:\"default\",size:\"sm\",children:\"Resume\"})]})}),showRestoreToast&&restoreTitle&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-6 right-6 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-slate-800/90 text-slate-100 px-4 py-2 rounded shadow-md flex items-center gap-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[\"Restored: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium ml-1\",children:restoreTitle})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col items-center justify-center px-4 md:px-6 py-8 overflow-y-auto\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{scale:0.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},transition:{delay:0.1,duration:0.6},className:\"relative mb-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(motion.div,{animate:isPlaying?{opacity:[0.4,0.6,0.4]}:{opacity:0.2},transition:isPlaying?{duration:3,repeat:Infinity}:{},className:\"absolute inset-0 -z-10 blur-3xl bg-gradient-to-br from-emerald-500/40 to-cyan-500/20 rounded-3xl\"}),/*#__PURE__*/_jsx(motion.div,{animate:isPlaying?{rotateZ:360}:{},transition:isPlaying?{duration:8,repeat:Infinity,ease:\"linear\"}:{},className:\"w-56 h-56 md:w-72 md:h-72 rounded-3xl bg-gradient-to-br from-slate-700 to-slate-900 \\r shadow-2xl shadow-emerald-500/20 flex items-center justify-center overflow-hidden border-4 border-slate-800\",children:bookInfo!==null&&bookInfo!==void 0&&bookInfo.cover?/*#__PURE__*/_jsx(\"img\",{src:bookInfo.cover,alt:bookInfo.title||'Audiobook cover',className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center w-full h-full bg-gradient-to-br from-slate-600 to-slate-800\",children:/*#__PURE__*/_jsx(Disc3,{className:\"w-24 h-24 text-slate-400 \".concat(isPlaying?'animate-spin':''),style:{animationDuration:isPlaying?'3s':'none'}})})})]})}),/*#__PURE__*/_jsxs(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.2},className:\"text-center mb-6 max-w-2xl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-2 leading-tight\",children:(bookInfo===null||bookInfo===void 0?void 0:bookInfo.title)||(file===null||file===void 0?void 0:(_file$name=file.name)===null||_file$name===void 0?void 0:_file$name.replace(/\\.[^/.]+$/,''))||'Unknown Title'}),(bookInfo===null||bookInfo===void 0?void 0:bookInfo.artist)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-base md:text-lg text-slate-400 font-light mb-3\",children:bookInfo.artist})]}),currentChapter&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:0.25},className:\"mb-8 px-4 py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-center max-w-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs uppercase tracking-widest text-emerald-400 font-semibold mb-1\",children:\"Current Chapter\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm md:text-base text-white font-medium\",children:currentChapter.title||\"Chapter \".concat(currentChapterIndex+1)})]}),/*#__PURE__*/_jsx(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:0.3},className:\"w-full max-w-2xl mb-8\",children:/*#__PURE__*/_jsx(ProgressBar,{currentTime:currentTime,duration:duration,buffered:buffered,onSeek:handleSeek})}),/*#__PURE__*/_jsx(motion.div,{initial:{y:20,opacity:0,scale:0.9},animate:{y:0,opacity:1,scale:1},transition:{delay:0.4},children:/*#__PURE__*/_jsx(PlaybackControls,{isPlaying:isPlaying,onPlayPause:handlePlayPause,onSkipBack:handleSkipBack,onSkipForward:handleSkipForward,onPrevChapter:handlePrevChapter,onNextChapter:handleNextChapter,hasChapters:chapters.length>1})})]}),/*#__PURE__*/_jsx(ChapterList,{chapters:chapters,currentChapterIndex:currentChapterIndex,currentTime:currentTime,onChapterSelect:handleChapterSelect,isOpen:showChapters,onClose:()=>setShowChapters(false)})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","motion","List","X","Disc3","Button","PlaybackControls","ProgressBar","ChapterList","SpeedControl","VolumeControl","jsx","_jsx","jsxs","_jsxs","AudiobookPlayer","_ref","_file$name","file","chapters","bookInfo","onClose","savedState","onSaveState","autoPlayRestore","onAutoPlayHandled","restoreTitle","audioRef","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","buffered","setBuffered","volume","setVolume","isMuted","setIsMuted","speed","setSpeed","showChapters","setShowChapters","currentChapterIndex","setCurrentChapterIndex","audioUrl","setAudioUrl","url","URL","createObjectURL","revokeObjectURL","current","undefined","playbackRate","tryPlay","play","err","console","warn","setShowResumePrompt","showResumePrompt","showRestoreToast","setShowRestoreToast","t","setTimeout","clearTimeout","handleResumeClick","interval","setInterval","timestamp","Date","now","clearInterval","length","chapterIndex","findIndex","chapter","index","nextChapter","startTime","handlePlayPause","pause","handleSeek","time","handleSkipBack","Math","max","handleSkipForward","min","handlePrevChapter","prevChapter","handleNextChapter","handleChapterSelect","handleVolumeChange","newVolume","handleToggleMute","newMuted","muted","handleSpeedChange","newSpeed","handleTimeUpdate","handleLoadedMetadata","handleProgress","bufferedEnd","end","currentChapter","div","initial","opacity","animate","className","children","ref","src","onTimeUpdate","onLoadedMetadata","onProgress","onPlay","onPause","onEnded","variant","size","onClick","onSpeedChange","onVolumeChange","onToggleMute","scale","y","transition","delay","repeat","Infinity","rotateZ","ease","cover","alt","title","concat","style","animationDuration","name","replace","artist","onSeek","onPlayPause","onSkipBack","onSkipForward","onPrevChapter","onNextChapter","hasChapters","onChapterSelect","isOpen"],"sources":["C:/Users/gabby/Documents/Audiobook Listener/src/Components/audiobook/AudiobookPlayer.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { List, X, Disc3 } from 'lucide-react';\r\nimport { Button } from '../ui/button';\r\nimport PlaybackControls from './PlaybackControls';\r\nimport ProgressBar from './ProgressBar';\r\nimport ChapterList from './ChapterList';\r\nimport SpeedControl from './SpeedControl';\r\nimport VolumeControl from './VolumeControl';\r\n\r\nexport default function AudiobookPlayer({ file, chapters, bookInfo, onClose, savedState, onSaveState, autoPlayRestore = false, onAutoPlayHandled, restoreTitle = null }) {\r\n    const audioRef = useRef(null);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [currentTime, setCurrentTime] = useState(0);\r\n    const [duration, setDuration] = useState(0);\r\n    const [buffered, setBuffered] = useState(0);\r\n    const [volume, setVolume] = useState(1);\r\n    const [isMuted, setIsMuted] = useState(false);\r\n    const [speed, setSpeed] = useState(1);\r\n    const [showChapters, setShowChapters] = useState(false);\r\n    const [currentChapterIndex, setCurrentChapterIndex] = useState(0);\r\n    const [audioUrl, setAudioUrl] = useState(null);\r\n\r\n    // Create object URL for the file\r\n    useEffect(() => {\r\n        if (file) {\r\n            const url = URL.createObjectURL(file);\r\n            setAudioUrl(url);\r\n            return () => URL.revokeObjectURL(url);\r\n        }\r\n    }, [file]);\r\n\r\n    // Restore saved playback position\r\n    useEffect(() => {\r\n        if (audioRef.current && savedState && savedState.currentTime) {\r\n            audioRef.current.currentTime = savedState.currentTime;\r\n            setCurrentTime(savedState.currentTime);\r\n            if (savedState.volume !== undefined) setVolume(savedState.volume);\r\n            if (savedState.speed !== undefined) {\r\n                setSpeed(savedState.speed);\r\n                audioRef.current.playbackRate = savedState.speed;\r\n            }\r\n        }\r\n    }, [savedState, audioUrl]);\r\n\r\n    // Try to autoplay when a new audio URL is available (user gesture from file select usually allows this)\r\n    useEffect(() => {\r\n        if (!audioUrl || !audioRef.current) return;\r\n\r\n        const tryPlay = async () => {\r\n            try {\r\n                await audioRef.current.play();\r\n                setIsPlaying(true);\r\n                // If this was a restore attempt, mark it handled\r\n                if (onAutoPlayHandled) onAutoPlayHandled();\r\n            } catch (err) {\r\n                // Autoplay may be blocked by the browser; keep UI ready for manual play\r\n                // eslint-disable-next-line no-console\r\n                console.warn('Autoplay attempt was blocked or failed:', err);\r\n                if (autoPlayRestore) {\r\n                    setShowResumePrompt(true);\r\n                }\r\n            }\r\n        };\r\n\r\n        tryPlay();\r\n    }, [audioUrl, autoPlayRestore, onAutoPlayHandled]);\r\n\r\n    // Show a resume prompt when autoplay was blocked for restored files\r\n    const [showResumePrompt, setShowResumePrompt] = useState(false);\r\n\r\n    // Brief unobtrusive toast to confirm a restored book\r\n    const [showRestoreToast, setShowRestoreToast] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (restoreTitle) {\r\n            setShowRestoreToast(true);\r\n            const t = setTimeout(() => setShowRestoreToast(false), 3500);\r\n            return () => clearTimeout(t);\r\n        }\r\n    }, [restoreTitle]);\r\n\r\n    const handleResumeClick = async () => {\r\n        if (!audioRef.current) return;\r\n        try {\r\n            await audioRef.current.play();\r\n            setIsPlaying(true);\r\n            setShowResumePrompt(false);\r\n            if (onAutoPlayHandled) onAutoPlayHandled();\r\n        } catch (err) {\r\n            // If still blocked, keep the prompt visible\r\n            // eslint-disable-next-line no-console\r\n            console.warn('User-initiated resume failed:', err);\r\n        }\r\n    };\r\n\r\n    // Save state periodically during playback\r\n    useEffect(() => {\r\n        if (!isPlaying || !onSaveState) return;\r\n        \r\n        const interval = setInterval(() => {\r\n            onSaveState({\r\n                currentTime,\r\n                volume,\r\n                speed,\r\n                timestamp: Date.now()\r\n            });\r\n        }, 5000); // Save every 5 seconds\r\n        \r\n        return () => clearInterval(interval);\r\n    }, [isPlaying, currentTime, volume, speed, onSaveState]);\r\n\r\n    // Update current chapter based on playback time\r\n    useEffect(() => {\r\n        if (chapters.length === 0) return;\r\n        \r\n        const chapterIndex = chapters.findIndex((chapter, index) => {\r\n            const nextChapter = chapters[index + 1];\r\n            if (nextChapter) {\r\n                return currentTime >= chapter.startTime && currentTime < nextChapter.startTime;\r\n            }\r\n            return currentTime >= chapter.startTime;\r\n        });\r\n        \r\n        if (chapterIndex !== -1 && chapterIndex !== currentChapterIndex) {\r\n            setCurrentChapterIndex(chapterIndex);\r\n        }\r\n    }, [currentTime, chapters, currentChapterIndex]);\r\n\r\n    const handlePlayPause = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        if (isPlaying) {\r\n            audioRef.current.pause();\r\n        } else {\r\n            audioRef.current.play();\r\n        }\r\n        setIsPlaying(!isPlaying);\r\n    }, [isPlaying]);\r\n\r\n    const handleSeek = useCallback((time) => {\r\n        if (!audioRef.current) return;\r\n        audioRef.current.currentTime = time;\r\n        setCurrentTime(time);\r\n    }, []);\r\n\r\n    const handleSkipBack = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        audioRef.current.currentTime = Math.max(0, audioRef.current.currentTime - 15);\r\n    }, []);\r\n\r\n    const handleSkipForward = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        audioRef.current.currentTime = Math.min(duration, audioRef.current.currentTime + 15);\r\n    }, [duration]);\r\n\r\n    const handlePrevChapter = useCallback(() => {\r\n        if (chapters.length <= 1 || currentChapterIndex === 0) return;\r\n        const prevChapter = chapters[currentChapterIndex - 1];\r\n        if (prevChapter && audioRef.current) {\r\n            audioRef.current.currentTime = prevChapter.startTime;\r\n        }\r\n    }, [chapters, currentChapterIndex]);\r\n\r\n    const handleNextChapter = useCallback(() => {\r\n        if (chapters.length <= 1 || currentChapterIndex >= chapters.length - 1) return;\r\n        const nextChapter = chapters[currentChapterIndex + 1];\r\n        if (nextChapter && audioRef.current) {\r\n            audioRef.current.currentTime = nextChapter.startTime;\r\n        }\r\n    }, [chapters, currentChapterIndex]);\r\n\r\n    const handleChapterSelect = useCallback((index) => {\r\n        if (chapters[index] && audioRef.current) {\r\n            audioRef.current.currentTime = chapters[index].startTime;\r\n            setShowChapters(false);\r\n        }\r\n    }, [chapters]);\r\n\r\n    const handleVolumeChange = useCallback((newVolume) => {\r\n        if (!audioRef.current) return;\r\n        audioRef.current.volume = newVolume;\r\n        setVolume(newVolume);\r\n        setIsMuted(newVolume === 0);\r\n    }, []);\r\n\r\n    const handleToggleMute = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        const newMuted = !isMuted;\r\n        audioRef.current.muted = newMuted;\r\n        setIsMuted(newMuted);\r\n    }, [isMuted]);\r\n\r\n    const handleSpeedChange = useCallback((newSpeed) => {\r\n        if (!audioRef.current) return;\r\n        audioRef.current.playbackRate = newSpeed;\r\n        setSpeed(newSpeed);\r\n    }, []);\r\n\r\n    const handleTimeUpdate = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        setCurrentTime(audioRef.current.currentTime);\r\n    }, []);\r\n\r\n    const handleLoadedMetadata = useCallback(() => {\r\n        if (!audioRef.current) return;\r\n        setDuration(audioRef.current.duration);\r\n    }, []);\r\n\r\n    const handleProgress = useCallback(() => {\r\n        if (!audioRef.current || !audioRef.current.buffered.length) return;\r\n        const bufferedEnd = audioRef.current.buffered.end(audioRef.current.buffered.length - 1);\r\n        setBuffered(bufferedEnd);\r\n    }, []);\r\n\r\n    const currentChapter = chapters[currentChapterIndex];\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            className=\"flex flex-col h-full bg-gradient-to-b from-slate-900 via-slate-950 to-black\"\r\n        >\r\n            {/* Hidden Audio Element */}\r\n            <audio\r\n                ref={audioRef}\r\n                src={audioUrl}\r\n                onTimeUpdate={handleTimeUpdate}\r\n                onLoadedMetadata={handleLoadedMetadata}\r\n                onProgress={handleProgress}\r\n                onPlay={() => setIsPlaying(true)}\r\n                onPause={() => setIsPlaying(false)}\r\n                onEnded={() => setIsPlaying(false)}\r\n            />\r\n\r\n            {/* Top Controls - Spotify Style */}\r\n            <div className=\"sticky top-0 z-30 backdrop-blur-md bg-slate-950/50 border-b border-slate-800/50\">\r\n                <div className=\"flex items-center justify-between px-4 md:px-6 py-3 md:py-4\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={onClose}\r\n                        className=\"text-slate-400 hover:text-white hover:bg-slate-800/50 rounded-full transition-all duration-200\"\r\n                    >\r\n                        <X className=\"w-5 h-5\" />\r\n                    </Button>\r\n                    \r\n                    <p className=\"text-xs uppercase tracking-widest text-slate-500 font-semibold\">\r\n                        Now Playing\r\n                    </p>\r\n                    \r\n                    <div className=\"flex items-center gap-1 md:gap-2\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => setShowChapters(true)}\r\n                            className=\"text-slate-400 hover:text-emerald-400 hover:bg-slate-800/50 rounded-full transition-all duration-200\"\r\n                        >\r\n                            <List className=\"w-5 h-5\" />\r\n                        </Button>\r\n                        <SpeedControl speed={speed} onSpeedChange={handleSpeedChange} />\r\n                        <VolumeControl \r\n                            volume={volume} \r\n                            onVolumeChange={handleVolumeChange}\r\n                            isMuted={isMuted}\r\n                            onToggleMute={handleToggleMute}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Resume Prompt when autoplay was blocked */}\r\n            {showResumePrompt && (\r\n                <div className=\"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50\">\r\n                    <div className=\"bg-emerald-600/95 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-3\">\r\n                        <span className=\"text-sm\">Resume playback to continue</span>\r\n                        <Button onClick={handleResumeClick} variant=\"default\" size=\"sm\">Resume</Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Small restore confirmation toast */}\r\n            {showRestoreToast && restoreTitle && (\r\n                <div className=\"fixed top-6 right-6 z-50\">\r\n                    <div className=\"bg-slate-800/90 text-slate-100 px-4 py-2 rounded shadow-md flex items-center gap-3\">\r\n                        <div className=\"text-sm\">Restored: <span className=\"font-medium ml-1\">{restoreTitle}</span></div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Main Content - Centered Layout */}\r\n            <div className=\"flex-1 flex flex-col items-center justify-center px-4 md:px-6 py-8 overflow-y-auto\">\r\n                {/* Album Art / Cover - Large and Animated */}\r\n                <motion.div\r\n                    initial={{ scale: 0.8, opacity: 0, y: 20 }}\r\n                    animate={{ scale: 1, opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.1, duration: 0.6 }}\r\n                    className=\"relative mb-12\"\r\n                >\r\n                    <div className=\"relative\">\r\n                        {/* Glow/Blur effect - behind cover */}\r\n                        <motion.div \r\n                            animate={isPlaying ? { opacity: [0.4, 0.6, 0.4] } : { opacity: 0.2 }}\r\n                            transition={isPlaying ? { duration: 3, repeat: Infinity } : {}}\r\n                            className=\"absolute inset-0 -z-10 blur-3xl bg-gradient-to-br from-emerald-500/40 to-cyan-500/20 rounded-3xl\" \r\n                        />\r\n                        \r\n                        {/* Cover Image */}\r\n                        <motion.div\r\n                            animate={isPlaying ? { \r\n                                rotateZ: 360,\r\n                            } : {}}\r\n                            transition={isPlaying ? { \r\n                                duration: 8, \r\n                                repeat: Infinity, \r\n                                ease: \"linear\" \r\n                            } : {}}\r\n                            className=\"w-56 h-56 md:w-72 md:h-72 rounded-3xl bg-gradient-to-br from-slate-700 to-slate-900 \r\n                                      shadow-2xl shadow-emerald-500/20 flex items-center justify-center overflow-hidden border-4 border-slate-800\"\r\n                        >\r\n                            {bookInfo?.cover ? (\r\n                                <img \r\n                                    src={bookInfo.cover} \r\n                                    alt={bookInfo.title || 'Audiobook cover'} \r\n                                    className=\"w-full h-full object-cover\"\r\n                                />\r\n                            ) : (\r\n                                <div className=\"flex items-center justify-center w-full h-full bg-gradient-to-br from-slate-600 to-slate-800\">\r\n                                    <Disc3 className={`w-24 h-24 text-slate-400 ${isPlaying ? 'animate-spin' : ''}`} style={{\r\n                                        animationDuration: isPlaying ? '3s' : 'none'\r\n                                    }} />\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n                    </div>\r\n                </motion.div>\r\n\r\n                {/* Book Title & Artist Info */}\r\n                <motion.div\r\n                    initial={{ y: 20, opacity: 0 }}\r\n                    animate={{ y: 0, opacity: 1 }}\r\n                    transition={{ delay: 0.2 }}\r\n                    className=\"text-center mb-6 max-w-2xl\"\r\n                >\r\n                    <h1 className=\"text-2xl md:text-3xl lg:text-4xl font-bold text-white mb-2 leading-tight\">\r\n                        {bookInfo?.title || file?.name?.replace(/\\.[^/.]+$/, '') || 'Unknown Title'}\r\n                    </h1>\r\n                    {bookInfo?.artist && (\r\n                        <p className=\"text-base md:text-lg text-slate-400 font-light mb-3\">{bookInfo.artist}</p>\r\n                    )}\r\n                </motion.div>\r\n\r\n                {/* Current Chapter Info */}\r\n                {currentChapter && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        transition={{ delay: 0.25 }}\r\n                        className=\"mb-8 px-4 py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-center max-w-lg\"\r\n                    >\r\n                        <p className=\"text-xs uppercase tracking-widest text-emerald-400 font-semibold mb-1\">Current Chapter</p>\r\n                        <p className=\"text-sm md:text-base text-white font-medium\">\r\n                            {currentChapter.title || `Chapter ${currentChapterIndex + 1}`}\r\n                        </p>\r\n                    </motion.div>\r\n                )}\r\n\r\n                {/* Progress Bar */}\r\n                <motion.div\r\n                    initial={{ y: 20, opacity: 0 }}\r\n                    animate={{ y: 0, opacity: 1 }}\r\n                    transition={{ delay: 0.3 }}\r\n                    className=\"w-full max-w-2xl mb-8\"\r\n                >\r\n                    <ProgressBar\r\n                        currentTime={currentTime}\r\n                        duration={duration}\r\n                        buffered={buffered}\r\n                        onSeek={handleSeek}\r\n                    />\r\n                </motion.div>\r\n\r\n                {/* Playback Controls - Center Stage */}\r\n                <motion.div\r\n                    initial={{ y: 20, opacity: 0, scale: 0.9 }}\r\n                    animate={{ y: 0, opacity: 1, scale: 1 }}\r\n                    transition={{ delay: 0.4 }}\r\n                >\r\n                    <PlaybackControls\r\n                        isPlaying={isPlaying}\r\n                        onPlayPause={handlePlayPause}\r\n                        onSkipBack={handleSkipBack}\r\n                        onSkipForward={handleSkipForward}\r\n                        onPrevChapter={handlePrevChapter}\r\n                        onNextChapter={handleNextChapter}\r\n                        hasChapters={chapters.length > 1}\r\n                    />\r\n                </motion.div>\r\n            </div>\r\n\r\n            {/* Chapter List Drawer */}\r\n            <ChapterList\r\n                chapters={chapters}\r\n                currentChapterIndex={currentChapterIndex}\r\n                currentTime={currentTime}\r\n                onChapterSelect={handleChapterSelect}\r\n                isOpen={showChapters}\r\n                onClose={() => setShowChapters(false)}\r\n            />\r\n        </motion.div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}