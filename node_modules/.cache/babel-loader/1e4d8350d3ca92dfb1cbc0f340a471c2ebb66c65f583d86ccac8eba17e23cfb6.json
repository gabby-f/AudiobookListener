{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst debug_1 = require(\"debug\");\nconst Token = require(\"token-types\");\nconst AbstractID3Parser_1 = require(\"../id3v2/AbstractID3Parser\");\nconst MpcSv8Parser_1 = require(\"./sv8/MpcSv8Parser\");\nconst MpcSv7Parser_1 = require(\"./sv7/MpcSv7Parser\");\nconst debug = (0, debug_1.default)('music-metadata:parser:musepack');\nclass MusepackParser extends AbstractID3Parser_1.AbstractID3Parser {\n  async postId3v2Parse() {\n    const signature = await this.tokenizer.peekToken(new Token.StringType(3, 'binary'));\n    let mpcParser;\n    switch (signature) {\n      case 'MP+':\n        {\n          debug('Musepack stream-version 7');\n          mpcParser = new MpcSv7Parser_1.MpcSv7Parser();\n          break;\n        }\n      case 'MPC':\n        {\n          debug('Musepack stream-version 8');\n          mpcParser = new MpcSv8Parser_1.MpcSv8Parser();\n          break;\n        }\n      default:\n        {\n          throw new Error('Invalid Musepack signature prefix');\n        }\n    }\n    mpcParser.init(this.metadata, this.tokenizer, this.options);\n    return mpcParser.parse();\n  }\n}\nexports.default = MusepackParser;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}