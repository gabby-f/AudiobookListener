{"ast":null,"code":"var _a;\nimport { __awaiter } from \"tslib\";\nimport { isStorageError } from '../lib/errors';\nimport StreamDownloadBuilder from './StreamDownloadBuilder';\nclass BlobDownloadBuilder {\n  constructor(downloadFn, shouldThrowOnError) {\n    this.downloadFn = downloadFn;\n    this.shouldThrowOnError = shouldThrowOnError;\n    this[_a] = 'BlobDownloadBuilder';\n    this.promise = null;\n  }\n  asStream() {\n    return new StreamDownloadBuilder(this.downloadFn, this.shouldThrowOnError);\n  }\n  then(onfulfilled, onrejected) {\n    return this.getPromise().then(onfulfilled, onrejected);\n  }\n  catch(onrejected) {\n    return this.getPromise().catch(onrejected);\n  }\n  finally(onfinally) {\n    return this.getPromise().finally(onfinally);\n  }\n  getPromise() {\n    if (!this.promise) {\n      this.promise = this.execute();\n    }\n    return this.promise;\n  }\n  execute() {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const result = yield this.downloadFn();\n        return {\n          data: yield result.blob(),\n          error: null\n        };\n      } catch (error) {\n        if (this.shouldThrowOnError) {\n          throw error;\n        }\n        if (isStorageError(error)) {\n          return {\n            data: null,\n            error\n          };\n        }\n        throw error;\n      }\n    });\n  }\n}\n_a = Symbol.toStringTag;\nexport default BlobDownloadBuilder;\n//# sourceMappingURL=BlobDownloadBuilder.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}