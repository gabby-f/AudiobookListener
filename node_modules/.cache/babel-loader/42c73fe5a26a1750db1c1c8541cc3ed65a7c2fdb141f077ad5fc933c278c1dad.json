{"ast":null,"code":"// types and functions copied over from viem so this library doesn't depend on it\nexport function getAddress(address) {\n  if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {\n    throw new Error(`@supabase/auth-js: Address \"${address}\" is invalid.`);\n  }\n  return address.toLowerCase();\n}\nexport function fromHex(hex) {\n  return parseInt(hex, 16);\n}\nexport function toHex(value) {\n  const bytes = new TextEncoder().encode(value);\n  const hex = Array.from(bytes, byte => byte.toString(16).padStart(2, '0')).join('');\n  return '0x' + hex;\n}\n/**\n * Creates EIP-4361 formatted message.\n */\nexport function createSiweMessage(parameters) {\n  var _a;\n  const {\n    chainId,\n    domain,\n    expirationTime,\n    issuedAt = new Date(),\n    nonce,\n    notBefore,\n    requestId,\n    resources,\n    scheme,\n    uri,\n    version\n  } = parameters;\n  // Validate fields\n  {\n    if (!Number.isInteger(chainId)) throw new Error(`@supabase/auth-js: Invalid SIWE message field \"chainId\". Chain ID must be a EIP-155 chain ID. Provided value: ${chainId}`);\n    if (!domain) throw new Error(`@supabase/auth-js: Invalid SIWE message field \"domain\". Domain must be provided.`);\n    if (nonce && nonce.length < 8) throw new Error(`@supabase/auth-js: Invalid SIWE message field \"nonce\". Nonce must be at least 8 characters. Provided value: ${nonce}`);\n    if (!uri) throw new Error(`@supabase/auth-js: Invalid SIWE message field \"uri\". URI must be provided.`);\n    if (version !== '1') throw new Error(`@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ${version}`);\n    if ((_a = parameters.statement) === null || _a === void 0 ? void 0 : _a.includes('\\n')) throw new Error(`@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\\\n'. Provided value: ${parameters.statement}`);\n  }\n  // Construct message\n  const address = getAddress(parameters.address);\n  const origin = scheme ? `${scheme}://${domain}` : domain;\n  const statement = parameters.statement ? `${parameters.statement}\\n` : '';\n  const prefix = `${origin} wants you to sign in with your Ethereum account:\\n${address}\\n\\n${statement}`;\n  let suffix = `URI: ${uri}\\nVersion: ${version}\\nChain ID: ${chainId}${nonce ? `\\nNonce: ${nonce}` : ''}\\nIssued At: ${issuedAt.toISOString()}`;\n  if (expirationTime) suffix += `\\nExpiration Time: ${expirationTime.toISOString()}`;\n  if (notBefore) suffix += `\\nNot Before: ${notBefore.toISOString()}`;\n  if (requestId) suffix += `\\nRequest ID: ${requestId}`;\n  if (resources) {\n    let content = '\\nResources:';\n    for (const resource of resources) {\n      if (!resource || typeof resource !== 'string') throw new Error(`@supabase/auth-js: Invalid SIWE message field \"resources\". Every resource must be a valid string. Provided value: ${resource}`);\n      content += `\\n- ${resource}`;\n    }\n    suffix += content;\n  }\n  return `${prefix}\\n${suffix}`;\n}\n//# sourceMappingURL=ethereum.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}